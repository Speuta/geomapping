<!DOCTYPE html>
<html>
<head>
	<title>CITY-LOOP</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, viewport-fit=cover" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta http-equiv="x-ua-compatible" content="IE=edge" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/header.css">
	<style>
		@-ms-viewport { width:device-width; }
		@media only screen and (min-device-width:800px) { html { overflow:hidden; } }
		html { height:100%; }
		body { height:100%; overflow:hidden; margin:0; padding:0; font-family:Arial, Helvetica, sans-serif; font-size:16px; color:#FFFFFF; background-color:#000000; }
	</style>

	<script src="plugins/geoMapping/geomapping.js"></script>

</head>
<body>
<!-- <script src="../js/jquery.min.js"></script>
<script src="../js/showPartners.js"></script> -->
<script src="tour.js"></script>

<div id="pano" style="width:100%;height:100%;">
	<noscript><table style="width:100%;height:100%;"><tr style="vertical-align:middle;"><td><div style="text-align:center;">ERROR:<br/><br/>Javascript not activated<br/><br/></div></td></tr></table></noscript>
	<script>
		embedpano({swf:"tour.swf", xml:"tour.xml", target:"pano", html5:"auto", mobilescale:1.0, passQueryParameters:true});
	</script>
</div>

<div id="topInfo">info text
</div>

<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/jquery.touchSwipe.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/iframeCommunication.js"></script>
<script src="js/lang.js"></script>
<script src="js/loadlang.js"></script>

<script>
	//var page = null;
	function goToHotspot(val){
		console.log('allez vers hotspot '+val);
		window.iframeCommunication.selectHotspot({key:val});
		
	}
	function headerShow(page,Title) {
		console.log("show info");
		$(document).ready(function () {
			console.log(page)
			var myFrame = "../" + page + "/index.html?lang="+lang;
			console.log(myFrame);
			document.getElementById("contentInfoiFrame").src = myFrame;
			document.getElementById("locTitle").innerHTML = Title;
			$("#infoFrame").show();
			$("#infoFrame").animate({height:'100%',
			top : '0px'
			},600);
			$("#infoFrame").animate({top : '0px'},600);
			//window.iframeCommunication.hideInfos();
		  
		});
	}
	function topInfoShow(text) {
		document.getElementById('topInfo').innerHTML = text ;
		$(document).ready(function () {
		$("#topInfo").animate({top: '0px'});
	});
	}
	function topInfoHide() {
		$(document).ready(function () {
		$("#topInfo").animate({top: '0px'},2000);
		$("#topInfo").animate({top: '-100%'},700);
	});
	}

	$(document).ready(function () {
		var imgSize = document.getElementById('topPhoto').height;
		$("#photoBox").animate({top: -imgSize-30},0);
		$("#btnMapClose").click(function () { 
			console.log('close');
			$("#infoFrame").animate({height:'13%'},"400");
			$("#infoFrame").hide();
			
			//window.iframeCommunication.showInfos();
		   
		});
		$("#btnMapTopClose").click(function () { 
			$("#topInfo").animate({top: '-60px'});
		});

        var geoMap = new geoMapping(geomapConfig);
	});
	
	function topPhotoShow(folder) {
		document.getElementById('topPhoto').src= "../"+folder+"/photo01.jpg";
		var imgSize = 0;
		console.log(imgSize);
		document.getElementById('topPhoto').onload = function () {
			imgSize = document.getElementById('topPhoto').height;
			$("#photoBox").show();
			$("#photoBox").animate({opacity: 1},0);
			$("#photoBox").animate({top: -imgSize-30},0);
			$("#photoBox").animate({top: imgSize-imgSize},1500);       
	};

	}
	function topPhotoHide() {
		var imgSize = document.getElementById('topPhoto').height;
		$(document).ready(function () {
			console.log("anim")
			$("#photoBox").hide();
			document.getElementById('topPhoto').src= "";
	});
	}
</script>

</body>
</html>
