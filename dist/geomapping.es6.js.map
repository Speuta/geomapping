{"version":3,"file":"geomapping.es6.js","sources":["../src/geomapping.js"],"sourcesContent":["'use strict';\r\n\r\nexport default class GeoMapping {\r\n    static PIXELS_OFFSET = 268435456;\r\n    static PIXELS_RADIUS = 85445659.4471; /* PIXELS_OFFSET / pi() */\r\n\r\n    static EVENTS = {\r\n        READY: 'ready',\r\n        ADD: 'add',\r\n        REMOVE: 'remove',\r\n        UPDATE_POSITION: 'update_position',\r\n        STOP_POSITION: 'stop_position'\r\n    };\r\n    _events = {};\r\n    _eventsOnce = [];\r\n\r\n    _bbox = undefined;\r\n    _points = [];\r\n    _img = undefined;\r\n    _watchPositionId = undefined;\r\n\r\n    constructor(_config) {\r\n        this._config = _config;\r\n        if(!this._config.boundingBox){\r\n            console.error(`GeoMapping :: boundingBox is mandatory.`);\r\n            return;\r\n        }\r\n        if(typeof this._config.testOutOfImage !== 'boolean'){\r\n            this._config.testOutOfImage = false;\r\n        }\r\n        this._init();\r\n        return this;\r\n    }\r\n\r\n\r\n    _init() {\r\n        this._generateEvents();\r\n        let _initBboxAndPoints = () => {\r\n            this._bbox = this._getStaticMapBoundingBoxFromTwoPoints(\r\n                this._config.boundingBox[0],\r\n                this._config.boundingBox[1]\r\n            );\r\n            if(this._config.points && this._config.points.length > 0){\r\n                this._config.points.forEach((_pt) => {\r\n                    this._addPoint(_pt.lat, _pt.lng, _pt.id, _pt.data);\r\n                });\r\n            }\r\n            this.trigger(GeoMapping.EVENTS.READY);\r\n        };\r\n        if(typeof this._config.imgSrc === 'string'){\r\n            this._preloadImg(this._config.imgSrc, (img) => {\r\n                this._img = img;\r\n                _initBboxAndPoints();\r\n            }, (err) => {\r\n                console.error(`GeoMapping :: error on preloading ${this._config.imgSrc}`, err);\r\n            });\r\n        } else if(this._config.imgSrc) {\r\n            this._img = this._config.imgSrc;\r\n            _initBboxAndPoints();\r\n        } else {\r\n            _initBboxAndPoints();\r\n        }\r\n    };\r\n\r\n    _generateEvents = () => {\r\n        Object.keys(GeoMapping.EVENTS).forEach((_key) => {\r\n            this._events[GeoMapping.EVENTS[_key]] = [];\r\n        });\r\n    };\r\n\r\n    _preloadImg(src, success, error){\r\n        let image = new Image();\r\n        image.onload = () => {\r\n            if(typeof success === 'function'){\r\n                success(image);\r\n            }\r\n        };\r\n        image.onerror = (err) => {\r\n            if(typeof error === 'function'){\r\n                error(err);\r\n            }\r\n        };\r\n        image.src = src;\r\n    };\r\n\r\n    _lngToX(lng) {\r\n        return Math.round(GeoMapping.PIXELS_OFFSET + GeoMapping.PIXELS_RADIUS * lng * Math.PI / 180);\r\n    };\r\n\r\n    _latToY(lat) {\r\n        return Math.round(GeoMapping.PIXELS_OFFSET - GeoMapping.PIXELS_RADIUS *\r\n            Math.log((1 + Math.sin(lat * Math.PI / 180)) /\r\n                (1 - Math.sin(lat * Math.PI / 180))) / 2);\r\n    };\r\n\r\n    _XToLon(x) {\r\n        return ((Math.round(x) - GeoMapping.PIXELS_OFFSET) / GeoMapping.PIXELS_RADIUS) * 180 / Math.PI;\r\n    };\r\n\r\n    _YToLat(y) {\r\n        return (Math.PI / 2 - 2 * Math.atan(Math.exp((Math.round(y) - GeoMapping.PIXELS_OFFSET) / GeoMapping.PIXELS_RADIUS))) * 180 / Math.PI;\r\n    };\r\n\r\n    _getStaticMapBoundingBoxFromTwoPoints(point1, point2) {\r\n        // Coordinates of the inner bounding box containing the two points\r\n        let box = {\r\n            tl: undefined,\r\n            br: undefined,\r\n            width: undefined,\r\n            height: undefined\r\n        };\r\n        let map = {\r\n            v_scale: undefined,\r\n            h_scale: undefined,\r\n            topLeft: undefined,\r\n            bottomRight: undefined\r\n        };\r\n\r\n        // Top left, with lat/longitude as pixel coordinates on full-size Mercator projection\r\n        box.tl = {\r\n            lat: this._latToY(Math.max(point1.lat, point2.lat)),\r\n            lng: this._lngToX(Math.min(point1.lng, point2.lng)),\r\n            x: Math.min(point1.x, point2.x),\r\n            y: Math.min(point1.y, point2.y)\r\n        };\r\n\r\n        // Bottom right, with lat/longitude as pixel coordinates on full-size Mercator projection\r\n        box.br = {\r\n            lat: this._latToY(Math.min(point1.lat, point2.lat)),\r\n            lng: this._lngToX(Math.max(point1.lng, point2.lng)),\r\n            x: Math.max(point1.x, point2.x),\r\n            y: Math.max(point1.y, point2.y)\r\n        };\r\n\r\n        // Box width and height\r\n        box.width = box.br.x - box.tl.x;\r\n        box.height = box.br.y - box.tl.y;\r\n\r\n        // Horizontal and vertical distance in pixels on full-size projection\r\n        let v_delta = box.br.lat - box.tl.lat;\r\n        let h_delta = box.br.lng - box.tl.lng;\r\n\r\n        // Get scale from the distance applied to map size\r\n        map.v_scale = v_delta / box.height;\r\n        map.h_scale = h_delta / box.width;\r\n\r\n        // Get map top left\r\n        map.topLeft = {\r\n            x: box.tl.lng - (box.tl.x * map.h_scale),\r\n            y: box.tl.lat - (box.tl.y * map.v_scale)\r\n        };\r\n\r\n        map.topLeft.lat = this._YToLat(map.topLeft.y);\r\n        map.topLeft.lng = this._XToLon(map.topLeft.x);\r\n\r\n        map.bottomRight = {\r\n            x: box.br.lng + ((box.width - box.br.x) * map.h_scale),\r\n            y: box.br.lat + ((box.height - box.br.y) * map.v_scale)\r\n        };\r\n        map.bottomRight.lat = this._YToLat(map.bottomRight.y);\r\n        map.bottomRight.lng = this._XToLon(map.bottomRight.x);\r\n\r\n        return map;\r\n    };\r\n\r\n    _getPointXYOnStaticMap(lat, lng, map) {\r\n        return {\r\n            lat: lat,\r\n            lng: lng,\r\n            x: (this._lngToX(lng) - map.topLeft.x) / map.h_scale,\r\n            y: (this._latToY(lat) - map.topLeft.y) / map.v_scale\r\n        };\r\n    };\r\n\r\n    _getPointLatLongOnStaticMap(x, y, map) {\r\n        return {\r\n            lat: this._YToLat(map.topLeft.y + (y * map.v_scale)),\r\n            lng: this._XToLon(map.topLeft.x + (x * map.h_scale))\r\n        };\r\n    };\r\n\r\n    _addPoint(lat, lng, id, data) {\r\n        let _point = this._getPointXYOnStaticMap(lat, lng, this._bbox);\r\n        _point.id = id;\r\n        _point.data = data;\r\n        _point.isOutOfMap = this._isOutOfImage(_point.x, _point.y);\r\n        this._points.push(_point);\r\n        return _point;\r\n    };\r\n\r\n    _isOutOfImage(x, y) {\r\n        if(this._img){\r\n            return !((x >= 0) && (x <= this._img.width) && (y >= 0) && (y <= this._img.height));\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    getPoints() {\r\n        return this._points;\r\n    };\r\n\r\n    getPointById(id) {\r\n        return this._points.find((_p) => {\r\n            return _p.id === id;\r\n        });\r\n    };\r\n\r\n    filterPointsByData(key, value) {\r\n        return this._points.filter((_p) => {\r\n            return (_p.data) && (_p.data[key]) && (_p.data[key] == value);\r\n        });\r\n    };\r\n\r\n    addPoint(lat, lng, id, data) {\r\n        let point = this._addPoint(lat, lng, id, data);\r\n        this.trigger(GeoMapping.EVENTS.ADD, point);\r\n        return point;\r\n    };\r\n\r\n    removePoint(pointId){\r\n        this._points.forEach((_pt, _index) => {\r\n            if(_pt.id === pointId){\r\n                this._points.splice(_index, 1);\r\n                this.trigger(GeoMapping.EVENTS.REMOVE, _pt);\r\n            }\r\n        });\r\n    };\r\n\r\n    getLatLngOnMap(x, y) {\r\n        if((this._config.testOutOfImage) && (this._isOutOfImage(x, y))){\r\n            console.error(`GeoMapping :: this point is out of map.`);\r\n            return;\r\n        }\r\n        return this._getPointLatLongOnStaticMap(x, y, this._bbox);\r\n    };\r\n\r\n    getPointXYOnMap(lat, lng) {\r\n        return this._getPointXYOnStaticMap(lat, lng, this._bbox);\r\n    };\r\n\r\n    trackPosition(_error){\r\n        if ((!window.navigator) || (!window.navigator.geolocation)) {\r\n            console.error(`GeoMapping :: error on trackPosition :: geolocation unavailable`);\r\n            if(typeof _error === 'function'){\r\n                _error(`GeoMapping :: error on trackPosition :: geolocation unavailable`);\r\n            }\r\n            return;\r\n        }\r\n        if(!this._watchPositionId){\r\n            this._watchPositionId = navigator.geolocation.watchPosition((_pos) => {\r\n                this.trigger(GeoMapping.EVENTS.UPDATE_POSITION,\r\n                    this._getPointXYOnStaticMap(_pos.coords.latitude, _pos.coords.longitude, this._bbox)\r\n                );\r\n            }, (err) => {\r\n                console.error(`GeoMapping :: error on trackPosition`, err);\r\n                if(typeof _error === 'function'){\r\n                    _error(`GeoMapping :: error on trackPosition`, err);\r\n                }\r\n            });\r\n        } else {\r\n            console.warn(`GeoMapping :: already tracking position`);\r\n        }\r\n    };\r\n\r\n    stopTrackPosition(){\r\n        if(this._watchPositionId){\r\n            navigator.geolocation.clearWatch(this._watchPositionId);\r\n            this._watchPositionId = undefined;\r\n            this.trigger(GeoMapping.EVENTS.STOP_POSITION);\r\n        } else {\r\n            console.warn(`GeoMapping :: tracking position is not activated`);\r\n        }\r\n    };\r\n\r\n\r\n    /** EVENTS **/\r\n    on = (eventName, handler) => {\r\n        if(this._events[eventName]){\r\n            this._events[eventName].push(handler);\r\n        }\r\n    };\r\n\r\n    one = (eventName, handler) => {\r\n        if(this._events[eventName]){\r\n            this._events[eventName].push(handler);\r\n            this._eventsOnce.push(handler);\r\n        }\r\n    };\r\n\r\n    off = (eventName, handler) => {\r\n        if(this._events[eventName] && (this._events[eventName].indexOf(handler) !== -1)){\r\n            this._events[eventName].splice(this._events[eventName].indexOf(handler), 1);\r\n        }\r\n        if(this._eventsOnce.indexOf(handler) !== -1){\r\n            this._eventsOnce.splice(this._eventsOnce.indexOf(handler), 1);\r\n        }\r\n    };\r\n\r\n    trigger = (eventName, data) => {\r\n        if(this._events[eventName]){\r\n            this._events[eventName].forEach((_handler, _index) => {\r\n                _handler(data);\r\n                if(this._eventsOnce.indexOf(_handler) !== -1){\r\n                    this._events[eventName].splice(_index, 1);\r\n                    this._eventsOnce.splice(this._eventsOnce.indexOf(_handler), 1);\r\n                }\r\n            });\r\n        }\r\n    };\r\n};\r\n"],"names":[],"mappings":"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"}